{{!-- pages/index.hbs --}} 

{{#> layouts/base title="Home | New Media Development | Artevelde University College Ghent" pathToRoot="./"

}} {{#*inline "content-block"}}

<div id="page">

  <div class="fb-grid__row">
    <div class="fb-grid__col-xs-1 fb-grid__col-sm-1 fb-grid__col-md-1 fb-grid__col-lg-1 fb-grid__col-xl-1 fb-grid__col-1"></div>
    <div class="fb-grid__col-xs-6 fb-grid__col-sm-6 fb-grid__col-md-6 fb-grid__col-lg-6 fb-grid__col-xl-6 fb-grid__col-6">
      <h6>Popular Blogs</h6>
    </div>
    <div class="fb-grid__col-xs-2 fb-grid__col-sm-2 fb-grid__col-md-2 fb-grid__col-lg-2 fb-grid__col-xl-2 fb-grid__col-2"> </div>
    <div class="fb-grid__col-xs-3 fb-grid__col-sm-3 fb-grid__col-md-3 fb-grid__col-lg-3 fb-grid__col-xl-3 fb-grid__col-3">
  </div>
  </div>
  <div class="fb-grid__row scrolling scroll" id="popularPosts">
  
  </div>

  <div class="fb-grid__row">
    <div class="fb-grid__col-xs-1 fb-grid__col-sm-1 fb-grid__col-md-1 fb-grid__col-lg-1 fb-grid__col-xl-1 fb-grid__col-1"></div>
    <div class="fb-grid__col-xs-6 fb-grid__col-sm-6 fb-grid__col-md-6 fb-grid__col-lg-6 fb-grid__col-xl-6 fb-grid__col-6">
      <h6>All Posts</h6>
    </div>
    <div class="fb-grid__col-xs-2 fb-grid__col-sm-2 fb-grid__col-md-2 fb-grid__col-lg-2 fb-grid__col-xl-2 fb-grid__col-2"> </div>
    <div class="fb-grid__col-xs-3 fb-grid__col-sm-3 fb-grid__col-md-3 fb-grid__col-lg-3 fb-grid__col-xl-3 fb-grid__col-3">    </div>
  </div>

  <div id="allBlogPosts">

  </div>

</div>
{{/inline}} {{#*inline "scripts-block"}}
<script>

  console.log('json is called in');


  function getJsonByCallbacks(url, succesHandler, errorHandler) {
    var xhr = new XMLHttpRequest();
    xhr.responseType = 'json';
    xhr.open('GET', url, true);
    xhr.onload = function () {
      if (xhr.status == 200) {
        var data = (!xhr.responseType) ? JSON.parse(response) : xhr.response;
        succesHandler && succesHandler(data)
      } else {
        errorHandler && errorHandler(`Error ${xhr.status}`);
      }
    };
    xhr.onerror = function () {

      errorHandler && errorHandler('network error');
    };
    xhr.send(null);
  }

  getJsonByCallbacks('https://api.myjson.com/bins/jftnf',
    function (data) {
     
      let blogData = data.articles;
      let tempStr = '';
      for(i=0; i < 3; ++i){
        console.info('inside the for loop')
        tempStr +=
          `<div class="fb-grid__col-xs-1 fb-grid__col-sm-1 fb-grid__col-md-1 fb-grid__col-lg-1 fb-grid__col-xl-1 fb-grid__col-1 scroll"></div>
            <div class="fb-grid__col-xs-8 fb-grid__col-sm-8 fb-grid__col-md-8 fb-grid__col-lg-8 fb-grid__col-xl-8 fb-grid__col-8 scroll">
              <a href="./detailBlog.html?project=${blogData[i].articleId}">
                <div class="picText">
                  <img src="${blogData[i].image}" alt="picture of the campus" class="height">
                  <div class= "textHeight">
                      <h5>${blogData[i].articleName}</h5>
                      <p>${blogData[i].shortBody}</p>
                  </div>
                </div>
              </a>
            </div>`;
      
      }
        let popularPostsElement = document.querySelector('#popularPosts');
        popularPostsElement.innerHTML = tempStr;

      let tempStr2 = '';
      let allPostsElement = document.querySelector('#allBlogPosts')
      blogData.forEach(function (blogData) {
        tempStr2 +=
          `<a href="./detailBlog.html?project=${blogData.articleId}"> <div class="fb-grid__row margin-top blogSum">
              <div class="fb-grid__col-xs-3 fb-grid__col-sm-3 fb-grid__col-md-3 fb-grid__col-lg-3 fb-grid__col-xl-3 fb-grid__col-3">
                <img src="${blogData.image}" alt="logo Portfolio rex" class="radius5"> </div>
                <div class="fb-grid__col-xs-1 fb-grid__col-sm-1 fb-grid__col-md-1 fb-grid__col-lg-1 fb-grid__col-xl-1 fb-grid__col-1"></div>
                <div class="fb-grid__col-xs-6 fb-grid__col-sm-6 fb-grid__col-md-6 fb-grid__col-lg-6 fb-grid__col-xl-6 fb-grid__col-6">
                <h5 class="articleName">${blogData.articleName}</h5>
                <span class="date"> ${blogData.date}<br> </span>
                <span class="tag tagArticle">Article</span>
              </div> 
            </div></a>`;
      });
      allPostsElement.innerHTML = tempStr2;
    },
    function (status) {
      console.log(status);
    }
  );
</script>
{{/inline}} {{/layouts/base}}